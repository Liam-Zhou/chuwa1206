# HW11

## Authorization and authentication

authentication: who you are. Verify the identity of the user

authorization: what you can do. Once a user's identity is verified through authentication, authorization verify the user's permission



## What is HTTP Session?

session is a server side mechanism to maintain states and do credential. When user log in, a session will be created and the session id will be sent to the user. Later when the user come back again with the correct session id, the server can go on making use of those saved cookies in that session.



## What is Cookie

cookies are small pieces of data. They are produced by the web server and set to the client by HTTp header. The browser stores them and include them in the future requests.



## What is the difference between Session and Cookie?

They are all methods to store user-specific inforamtion. But the differences are

Cookies are stored in browser, and is accessible to the users, thus the information is insensitive. Cookies can persist for a long time, maybe days, months or years. 

Session data are stored in server side, and only session id is exposed to users. Sensitive data are preserved in session. It only lasts for short time, when timeout, or user log out, or user closes the browser, a session is ended.



## How do we use session and cookie to keep user information across the the application?

while sessions are great for storing temporary, sensitive data on the server, cookies are useful for persisting less sensitive data on the client side



## What is JWT?

Json web token is another way apart from http session to remember user log in state. But JWT works on distrubited server, since JWT itself contains information itself instead of an id. It is created by the server and sent to the user, and is included in every future request. JWT contains three part, header, payload, which is the information, and the signature, which is encoded header and payload plus a secret.



## What is the spring security filter?

A filter in Spring Security is essentially a Java Servlet Filter that intercepts HTTP requests to apply security checks. e.g. UsernamePasswordAuthenticationFilter, BasicAuthenticationFilter, RememberMeAuthenticationFilter,LogoutFilter

![image-20240128180945655](C:\Users\Hanyun\OneDrive\桌面\chuwa java batch\assignments\chuwa1206\ShortQuestions\typora_images\hw11\image-20240128180945655.png)



## decribe how do JWT work

see what is jwt



## Do you use any Encoder to encode Password?

Bcrypt





## What is UserDetailService? AuthenticationProvider?AuthenticationManager? AuthenticationFilter
- The `UserDetailsService` is an interface used for retrieving user-related data. It has a single method `loadUserByUsername(String username)` which locates the user based on the username. The returned `UserDetails` object contains information such as the username, password, and the authorities granted to the user. This service is often used to interact with a database to fetch user credentials and roles.
- The `AuthenticationProvider` is an interface that represents an authentication mechanism. An implementation of this interface takes an `Authentication` object, attempts to authenticate it, and returns a fully populated `Authentication` object if successful. Common implementations include `DaoAuthenticationProvider` (which uses `UserDetailsService` to authenticate a user) and `LdapAuthenticationProvider` (for LDAP-based authentication).
- The `AuthenticationManager` is an interface that defines the API for authentication. The most common implementation is `ProviderManager`, which delegates the authentication request to a list of `AuthenticationProvider` instances. It acts as an entry point for authentication within the Spring Security framework and is used to initiate the authentication process.
- Authentication filters are responsible for extracting authentication credentials (like username and password) from the request and initiating the authentication process. Once the filter captures the credentials, it creates an `Authentication` object and passes it to the `AuthenticationManager`.



## What is the disadvantage of Session? how to overcome the disadvantage?

It takes server memory and is challenging in terms of scalability. The solution is to use external storage like redis and do session sharing.



## how to get value from application.properties?

``` java
@Value("${app.jwt-secret}")
private String jwtSecret;
```



## What is the role of configure(HttpSecurity http) and configure(AuthenticationManagerBuilder auth)?
These methods are overridden to customize security configurations.

**configure(HttpSecurity http)**:

- This method is used to configure the security of web paths in your application, manage access to specific URLs, and configure custom login and logout behavior.

**configure(AuthenticationManagerBuilder auth)**:

- This method is used to set up the authentication mechanism by defining user details services and password encoders.

``` java
protected void configure(HttpSecurity http) throws Exception
{
    http.csrf().disable()
    	.exceptionHandling()
        
    .authenticationEntryPoint(authenticationEntryPoint)
        .and()
        .sessionManagement()
        
    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
        .and()
        .authorizeRequests()
        .antMatchers(HttpMethod.GET,"/api/**").permitAll()
        .antMatchers("/api/auth/**").permitAll()
        .anyRequest()
        .authenticated();
    
    http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);
}

@Override
protected void configure(AuthenticationManagerBuilder auth)
throws Exception {
	auth.userDetailsService(customUserDetailsService).passwordEncod	er(passwordEncoder());
}
```



## What is Spring security authentication and authorization?

 In Spring Security, the authentication process is typically handled by an `AuthenticationManager`, which delegates to one or more `AuthenticationProvider` instances. A user provides credentials (like username and password), which are then checked against the stored user details (often retrieved using a `UserDetailsService`).

Once a user is authenticated, Spring Security checks whether the user has the necessary permissions (or roles) to access a particular resource or perform a certain action. This is often done using role-based access control (RBAC).