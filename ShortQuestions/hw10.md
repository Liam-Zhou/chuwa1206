## hw42-exception-validation

1. List all of the annotations you learned from class and homework to annotations.md
2. what is the @configuration and @bean?

   - @Configuration indicates that the class has @Bean definitions
   - @Bean is applied to a method to specify that it returns a bean to be managed by the Spring context

3. How do you handle the exception in Spring?

   Define exceptions to be handled that are not built-in.

   Write a global error handler class with @ControllerAdvice annotation to handle all possible exceptions.

4. How do you do the validations in Spring? And list some validation annotations you know.

   Add desired annotations on the fields of DTOs that we want to monitor, and add @Valid to method parameters of corresponding controller methods.

   - @NotNull
   - @Size(min = 10, message = "User name should have at least 10 character")
   - @Valid

5. What is the actuator, list some endpoints it provides?

   Actuator provides the production-ready features to monitor and manage the Spring Boot applications.

   - beans: displays a complete list of beans in the application
   - caches: exposes available caches
   - threaddump: performs a thread dump

## hw42-Spring-Data

1. List all of the annotations you learned from class and homework to annotations.md
2. Type out the code for the Comment feature of the class project.
3. In postman, call all of the APIs in PostController and CommentController.
4. What is JPA? and what is Hibernate?

   JPA uses JDBC to CRUD from the database and transfers result from database into Java entities.

   Hibernate is the most popular ORM (object relational mapping) framework that converts database records into instances in programming languages.

5. What is Hiraki? what is the benefits of connection pool?

   Hiraki is a data source connection pool that Spring Boot uses to connect to database.

   Connection pool eliminates the overhead of creating and destroying connections by reusing the connection.

6. What is the @OneToMany, @ManyToOne, @ManyToMany? write some examples.

   @OneToMany means one row in a table is mapped to multiple rows in another table.

   One post -> many comments

   @ManyToOne means multiple rows in a table is mapped to one row in another table.

   Many comments -> one post

   @ManyToMany means multiple records in a table is associated to multiple records in another table

   One book may be written be multiple authors, and one author may write multiple books.

7. What is the cascade = CascadeType.ALL, orphanRemoval = true? and what are the other CascadeType and their features? In which situation we choose which one?

   CascadeType.ALL: propagate all operations from parent entity to its child entity

   CascadeType.PERSIST: propagate persist operation to its child entity

   CascadeType.MERGE: propagates merge operation to parent to child

   CascadeType.REMOVE: propagates remove operation to parent to child

   CascadeType.DETACH: when we detach a parent entity, the child entity will be removed

   CascadeType.LOCK: reattaches the entity and child entity with persistent context again

   CascadeType.REFRESH: when parent entity is refreshed from the database, the chile entity is also refreshed

   CascadeType.REPLICATE: when we have more than one data sources and want data in sync, the sync operation will propagate from parent entity to child entity

   CascadeType.SAVE_UPDATE: propagates the same operation to the associated child entity. Itâ€™s useful when we use Hibernate-specific operations like save, update and saveOrUpdate

   orphanRemoval = true: child entity is removed when child entity is no longer associated with parent entity

   mappedBy="cart": name of the database that is related to the field below

8. What is the fetch = FetchType.LAZY, fetch = FetchType.EAGER? what is the difference? In which situation you choose which one?

   fetch = FetchType.LAZY: load child entity when needed

   fetch = FetchType.EAGER: load child entity when parent entity is loaded

9. What is the rule of JPA naming convention? Shall we implement the method by ourselves? Could you list some examples?

   Query method return type + query method subject keyword + query method predicate keyword + method parameters

   ```
   public List<Product> findByNameAndDescription(String name, String description);
   ```

10. Try to use JPA advanced methods in your class project. In the repository layer, you need to use the naming convention to use the method provided by JPA.
11. (Optional) Check out a new branch(https://github.com/TAIsRich/springboot-redbook/tree/hw02_01_jdbcTemplate) from branch 02_post_RUD, replace the dao layer using JdbcTemplate.
12. type the code, you need to checkout new branch from branch 02_post_RUD, name the new branch with https://github.com/TAIsRich/springboot-redbook/tree/hw05_01_slides_JPQL.
13. What is JPQL?

    JPQL is a query language used by JPA to make queries against relational databases

14. What is @NamedQuery and @NamedQueries?

    @NamedQuery defines a named query in hibernate

    We use @NamedQueries to define multiple named queries.

15. What is @Query? In which Interface we write the sql or JPQL?

    @Query is one of the ways provided by Spring Data to help define a query for us to execute.

    We write them in repository interface.

16. What is HQL and Criteria Queries?

    HQL is the query language used by Hibernate

    Criteria Queries are built by criteria APIs object programmatically, by applying different filtration rules and logical conditions.

17. What is EntityManager?

    A JPA EntityManager manages connection to a database as will as database operations.

18. What is SessionFactory and Session?

    SessionFactory is a thread safe object, with configuration to connect to a database, that creates session.

    Session is an object to get physical connection to the database.

19. What is Transaction? how to manage your transaction?

    A transaction represents a unit of work

    If one step fails, the whole transaction fails

20. What is hibernate Caching?

    Hibernate uses two-level caching to cache the data that is previously retrieved.

21. What is the difference between first-level cache and second-level cache?

    First-level cache is session specific. When we get the same data in the same session, the data will be directly returned. When an entity is looked up and its found in the first-level cache, it is returned from there.

    Second-level cache works at the session factory level. When the object is cached at this level, it is available for the entire application.

22. How do you understand @Transactional? (https://github.com/TAIsRich/tutorialtransaction)

    @Transactional is used to mark a class or a method. Any database operation performed within the marked class or method will be executed within a transaction.

## hw43-Spring-Basic

1. List all of the annotations you learned from class and homework to annotations.md
2. What is Spring and Springboot? What is the benefits of using Springboot?

   Spring is a light-weight framework that lets java 7 developers to build enterprise applications.

   Springboot is built on top of spring framework to provide all features of spring and is easier to use than Spring.

   The benefit of Springboot is that its convention-over-configuration solution increases the pace of building an application.

3. What is IOC and What is DI?

   IOC stands for inversion of control, which means that the framework gains control of the flow and make calls to our custom code.

   DI stands for dependency injection, which means that the dependency is not created internally, but rather created outside of the class and injected into the instance. For Spring Boot framework, the container will inject beans during runtime.

4. What is @ComponentScan?

   @ComponentScan is used by Spring framework for auto-detecting and registering spring-managed components within a specified package or a set of packages.

5. How to define which package spring need to scan in xml and annotation?

   ```
   <context:component-scan base-package="com.baeldung.annotationconfigvscomponentscan.components" />

   @ComponentScan(basePackages = path)
   ```

6. What is @SpringbootApplication?

   It is a combination of three annotations: @Configuration, @EnableAutoConfiguration, and @ComponentScan

7. How many ways we can define a bean?

   - XML
   - @Component
   - @Bean

8. What is default bean name for @Component and @Bean?

   @Component: class name\
   @Bean: function name

9. What is the difference between @Component and @Service, @Repository?

   @Component is a generic type for any spring-managed component, which is part of @Service and @Repository

   @Service annotates the class at the service layer

   @Repository annotates classes at persistence layer, which acts as a database repository.

10. How many annotations we can use to inject the bean?

    - @Autowired
    - @Resource
    - @Inject

11. Tell me the three types to do dependency injection(How can we inject the beans in Spring)? Which way is better and why?

    Field injection, setter injection, and constructor injection.

    Constructor injection is better because of immutability, explicit dependencies, test-friendliness, circular dependency avoidance, and compatible with Java Records.

12. If we have multiple beans for one type, how to set one is primary? and how to let the spring to pick one bean to inject if no primary.

    Put @Primary on top of the bean we would like to use. We can use @Qualifier if we don't want to use @Primary.

13. What is the difference between BeanFactory and ApplicationContext in Spring?

    BeanFactory is more light-weighted while ApplicationContext has more advanced features. BeanFactory loads beans on demand while ApplicationContext leads beans at startup. ApplicationContext has more features that are suitable for enterprise applications.

14. What is the Scope of a Bean? and list the examples for each scope.

    Scope of a bean defines the lifecycle of the bean

    - singleton

    ```
    @Bean
    @Scope("singleton")
    public Person personSingleton() {
        return new Person();
    }
    ```

    - prototype

    ```
    @Bean
    @Scope("prototype")
    public Person personPrototype() {
        return new Person();
    }
    ```

    - request

    ```
    @Bean
    @Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)
    public HelloMessageGenerator requestScopedBean() {
        return new HelloMessageGenerator();
    }
    ```

    ```
    @Bean
    @RequestScope
    public HelloMessageGenerator requestScopedBean() {
        return new HelloMessageGenerator();
    }
    ```

    - session

    ```
    @Bean
    @Scope(value = WebApplicationContext.SCOPE_SESSION, proxyMode = ScopedProxyMode.TARGET_CLASS)
    public HelloMessageGenerator sessionScopedBean() {
        return new HelloMessageGenerator();
    }
    ```

    ```
    @Bean
    @SessionScope
    public HelloMessageGenerator sessionScopedBean() {
        return new HelloMessageGenerator();
    }
    ```

    - application

    ```
    @Bean
    @Scope(
    value = WebApplicationContext.SCOPE_APPLICATION, proxyMode = ScopedProxyMode.TARGET_CLASS)
    public HelloMessageGenerator applicationScopedBean() {
        return new HelloMessageGenerator();
    }
    ```

    ```
    @Bean
    @ApplicationScope
    public HelloMessageGenerator applicationScopedBean() {
        return new HelloMessageGenerator();
    }
    ```

    - websocket

    ```
    @Bean
    @Scope(scopeName = "websocket", proxyMode = ScopedProxyMode.TARGET_CLASS)
    public HelloMessageGenerator websocketScopedBean() {
        return new HelloMessageGenerator();
    }
    ```

15. Configure a bean using xml. If bean has parameters/dependencies, how can we configure the bean? (you can google the tutorial how to configure beans in xml, and feel free to ask me any questions if you don't understand. it is a little bit old, I am not sure if I need to explain it in class)

    ```
    <beans:bean id="app-config" class="com.typesafe.config.Config"/>
    ```

    GrandMother Bean:

    ```
    @Service("grandmotherBean")
    public class Grandmother {

        @Autowired
        private FatherBean father;

    }
    ```

    Father Bean Here

    ```
    @Service("fatherBeanBean")
    public class FatherBean {
    public FatherBean (){

        }

        @Override
        public String toString() {
            return " it is me ! FatherBean";
        }

    }
    ```

    Second Approach

    ```
    <beans xmlns="http://www.springframework.org/schema/beans">

        <bean id="Grandmother"
            class="com.dulaj.stack.Grandmother">
            <property name="FatherBean" >
                <ref local="fatherBeanBean"/>
            </property>
        </bean>

    <bean id="fatherBeanBean" class="com.dulaj.stack.FatherBean">
        </bean>
    </beans>
    ```

    https://stackoverflow.com/questions/57848151/spring-create-bean-in-xml-with-reference-to-java-bean-and-the-other-way-aroun
