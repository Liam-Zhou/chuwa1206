# hw10

## hw42-exception-validation

1. List all of the annotations you learned from class and homework to annotaitons.md
2. what is the @configuration and @bean?
   `@conciguration` is a class level annotation, which makes a class to be a bean and manged by spring. it could be considered as xml for configuration.
   `@bean` is method level annotation which will register the return type of the method as a bean and manged by spring.

   ```java
   @Configuration
   public class AppConfig {
       @Bean
       public MyBean myBean() {
           return new MyBean();
       }
   }
   ```

3. How do you handle the exception in Spring?
   1. use @ControllerAdvice annotation on class and define exception handler on method and use @ExceotionHeadler annotation.
4. How do you do the validations in Spring? And list some validation annotaitons you know.
   we can use @Valid annotation in method parameter to trigger the validation, but we need first define how to validate in the entity class.
   - Here are some commonly used validation annotations in Spring:

     - `@NotNull`: Checks that the annotated element is not `null`.
     - `@NotBlank`: Checks that the annotated string is not empty or consists of whitespace characters only.
     - `@NotEmpty`: Checks that the annotated element is not `null` and not empty.
     - `@Size(min, max)`: Checks that the size of the annotated element meets the specified constraints.
     - `@Min` and `@Max`: Check that the annotated element is a number whose value is within the specified range.
     - `@Email`: Checks that the annotated string is a valid email address.
     - `@Pattern(regexp)`: Checks that the annotated string matches the specified regular expression.

5. What is the actuator, list some endpoints it provides?
   actuator allow us to monotor and mange our application.
   Spring Boot Actuator is a set of production-ready features that help you monitor and manage your application. It provides several built-in endpoints that expose various information about the application's health, metrics, environment, and more. These endpoints are useful for monitoring and managing your Spring Boot application in a production environment. Here are some of the commonly used Actuator endpoints:

   1. **Beans Endpoint (`/actuator/beans`):**
      - Provides a complete list of all Spring beans in the application.
      - Example: `http://localhost:8080/actuator/beans`
   2. **Health Endpoint (`/actuator/health`):**
      - Provides information about the health of the application.
      - Example: `http://localhost:8080/actuator/health`

   3. **Info Endpoint (`/actuator/info`):**
      - Displays arbitrary application information.
      - Example: `http://localhost:8080/actuator/info`

   4. **Metrics Endpoint (`/actuator/metrics`):**
      - Exposes a wide range of metrics related to the application, including JVM memory usage, garbage collection, thread pools, and more.
      - Example: `http://localhost:8080/actuator/metrics`

   5. **Environment Endpoint (`/actuator/env`):**
      - Shows information about the application's environment properties.
      - Example: `http://localhost:8080/actuator/env`

6. watch those videos(泛泛地看一遍，能理解多少是多少。没有必要看其它视频)
    a. Spring 简介： <https://www.youtube.com/watch?v=l0MqsOADAUE&list=PLmOn9nNkQxJFbsU4Qz8CdRiVM4Qs3ci75&index=64>
    b. IOC/DI: <https://www.youtube.com/watch?v=PyMxNr2p0C0&list=PLmOn9nNkQxJFbsU4Qz8CdRiVM4Qs3ci75&index=65>
    c.  IOC container: <https://www.youtube.com/watch?v=pLa77Tw-yyI&list=PLmOn9nNkQxJFbsU4Qz8CdRiVM4Qs3ci75&index=66>
    d.  Bean:
        i.  <https://www.youtube.com/watch?v=OpgMHzM7tgQ&list=PLmOn9nNkQxJFbsU4Qz8CdRiVM4Qs3ci75&index=67>
        ii. <https://www.youtube.com/watch?v=OpgMHzM7tgQ&list=PLmOn9nNkQxJFbsU4Qz8CdRiVM4Qs3ci75&index=68>
        iii.  <https://www.youtube.com/watch?v=OpgMHzM7tgQ&list=PLmOn9nNkQxJFbsU4Qz8CdRiVM4Qs3ci75&index=69>
        e.  DI:
        i.  <https://www.youtube.com/watch?v=MgTpBST9onM&list=PLmOn9nNkQxJFbsU4Qz8CdRiVM4Qs3ci75&index=70>
        ii. <https://www.youtube.com/watch?v=yhEWZx2i1BA&list=PLmOn9nNkQxJFbsU4Qz8CdRiVM4Qs3ci75&index=71>

## hw42-Spring-Data

*see hw9.md*

## hw43-spring-basic

1. List all of the annotations you learned from class and homework to annotaitons.md
2. What is Spring and Springboot? What is the benfits of using Srpingboot?
   The most fundamental aspect of Spring and Spring Boot is Dependency Injection (DI) or Inversion of Control (IoC), the cornerstone of every Spring Module. We can create loosely coupled applications that can be easily tested and maintained using these design patterns. The Spring framework also includes several out-of-the-box modules, namely:

   - Spring MVC
   - Spring Security
   - Spring ORM
   - Spring Test
   - Spring AOP
   - Spring Web Flow
   - Spring JDBC.
  but for spring we need care tone of configuration by ourself and spring but simplify that proccess(convention over configuration).
3. What is IOC and What is DI?
   IOC is we let spring container to manage the entity we needed, so developer can focus on the bussines logic. and IOC is implemented via DI. furtuhermore, the IoC container is responsible for managing the lifecycle of beans (objects) and injecting their dependencies. The container automatically resolves and injects the dependencies, allowing developers to focus on writing business logic rather than managing object creation and wiring.
4. What is  @CompnonentScan?
   @ComponentScan is an annotation used in the Spring Framework for auto-detecting and registering Spring-managed components (e.g. beans, controllers, services, repositories, etc.) within a specified package or set of packages.
5. How to define which package spring need to scan in xml and annotaiton?
   1. `xml`:

      ```xml
      <context:component-scan base-package="com.example"/>
      ```

   2. `annotation`

      ```java
      @Configuration
      @ComponentScan(basePackages = "com.example")
      public class AppConfig {
            // Other bean definitions or configuration can go here
      }
      ```

6. What is  @SpringbootApplication?
   `@SpringbootApplication`to declare a main class for a Spring Boot application. It is often used as the main entry point for a Spring Boot application. it is a combination of other annotations.
   - @SpringBootConfiguration
   - @EnableAutoConfiguration
   - @ComponentScan
   - @Configuration
7. How many ways wo can define a bean?
   1. @Configuration class @Bean method
   2. @Service
   3. @Repository
   4. @Controller
   5. XML `<bean id = 'myBean' class = "xxxxxx"/>`

8. What is default bean name for  @Component and  @Bean?
   the default bean name is the uncapitalized non-qualified class(for @Component) or method(for @Bean) name.  if the class is MyComponent, the default bean name is myComponent
9. What is the difference between  @component and  @service,@repository?
    In Spring, `@Component`, `@Service`, and `@Repository` are specialized annotations that are used to indicate different types of Spring-managed components. While they are technically equivalent in terms of functionality (all three are stereotype annotations and can be used interchangeably for auto-scanning and component registration), they carry different semantics and are often used to convey specific meanings about the role or purpose of the annotated class. Here's a brief overview of each:

    1. **@Component:**
       - `@Component` is a generic stereotype annotation used to indicate that a class is a Spring component. It is the most generic stereotype and can be used for any Spring-managed bean. If there is no specific reason to use `@Service` or `@Repository`, and the class is simply a general-purpose component, you can use `@Component`.

        ```java
        @Component
        public class MyComponent {
            // Class definition
        }
        ```

    2. **@Service:**
       - `@Service` is a specialization of `@Component` and is used to indicate that a class is a service component in the business logic or service layer of the application. It's often used to mark classes that handle business logic, service-oriented operations, or transaction management.

        ```java
        @Service
        public class MyService {
            // Business logic
        }
        ```

    3. **@Repository:**
       - `@Repository` is another specialization of `@Component` and is typically used to indicate that a class is a data repository, responsible for encapsulating interactions with a database or other data source. It is commonly used for classes implementing data access functionality.

        ```java
        @Repository
        public class MyRepository {
            // Data access logic
        }
        ```

10. How many annotaitons we can use to inject the bean?

    - `@Autowired`
    - `@Qualifier`
    - `@Resource`

11. Tell me the three types to do dependency injection(How can we inject the beans in Spring)? Which way is better and why?
    1. constrctor injection
    2. setter injection
    3. field injection
    `Constructor Injection is Preferred:`
**Why**:
    - Promotes immutability: Once the object is constructed, its state (including dependencies) cannot be changed.
    - Clearly communicates required dependencies: Dependencies are explicitly declared in the constructor signature.
    - Ensures that the object is in a valid state upon creation.Constructor injection is considered a best practice in Spring.
    - it is more eaier for testing.

12. If we have multiple beans for one type, how to set one is primary? and how to let the spring to pick one bean to inject if no primay.
   Spring's `@Primary` annotation can help determine which bean to give preference when multiple beans of the same type are eligible for auto wiring
   
13. What is the difference between BeanFactory and ApplicationContext in Spring?

   | Feature                 | `BeanFactory`                                     | `ApplicationContext`                                   |
   |-------------------------|---------------------------------------------------|--------------------------------------------------------|
   | Basic Container         | Basic container for managing beans.               | Extension of `BeanFactory` with additional features.    |
   | Lazy Loading            | Lazy loading approach - beans created when requested. | May follow an eager loading approach for faster startup. |
   | Resource Consumption    | Generally lower resource consumption.              | May consume more resources due to eager loading.        |
   | Advanced Features       | Lacks some advanced features.                      | Provides additional features like events and AOP.      |
   | Bean Definition Inheritance | Does not support bean definition inheritance.   | Supports bean definition inheritance.                  |
   | Event Propagation       | Does not support event propagation.                | Supports event propagation and handling.               |
   | Application Startup Time | May have slower startup times.                    | May have faster startup times due to eager loading.     |

14. What is the Scope of a Bean?  and list the examples for each scope.
    1. **Singleton:**
       - The `@Singleton` scope is not explicitly defined in Spring; however, it behaves like the default scope (`@Scope("singleton")`). It creates a single instance of the bean within the container.

       ```java
       @Component
       public class SingletonScopedBean {
           // Class definition
       }
       ```

    2. **Prototype:**
       - The `@Prototype` scope is not explicitly defined in Spring; however, it behaves like the `@Scope("prototype")`. It creates a new instance of the bean every time it is requested.

       ```java
       @Component
       public class PrototypeScopedBean {
           // Class definition
       }
       ```

    3. **Request:**
       - In a web environment, the `@RequestScope` creates a new instance of the bean for each HTTP request.

       ```java
       @Component
       @Scope("request")
       public class RequestScopedBean {
           // Class definition
       }
       ```

    4. **Session:**
       - In a web environment, the `@SessionScope` creates a new instance of the bean for each HTTP session.

       ```java
       @Component
       @Scope("session")
       public class SessionScopedBean {
           // Class definition
       }
       ```

    5. **Application:**
       - In a web environment, the `@ApplicationScope` creates a single instance of the bean per entire web application.

       ```java
       @Component
       @Scope("application")
       public class ApplicationScopedBean {
           // Class definition
       }
       ```

    6. **WebSocket:**
       - In a web environment with WebSocket support, the `@WebSocketScope` creates a new instance of the bean for each WebSocket session.

       ```java
       @Component
       @Scope("websocket")
       public class WebSocketScopedBean {
           // Class definition
       }
       ```

    7. **Custom Scope:**
       - You can define a custom scope by implementing the `org.springframework.beans.factory.config.Scope` interface. This example uses a custom scope named "customScope."

       ```java
       @Component
       @Scope("customScope")
       public class CustomScopedBean {
           // Class definition
       }
       ```

       In the configuration:

       ```java
       @Configuration
       public class CustomScopeConfig {

           @Bean
           public CustomScope customScope() {
               return new CustomScope();
           }
       }
       ```

15. Configure a bean using xml. If bean has parameters/dependencies, how can we configure the bean? (you can google the tutorial how to configure beans in xml, and feel free to ask me any quesitons if you don't understand. it is a little bit old, I am not sure if I need to exaplain it in class).
    - in the xml we can use `constructor-arg` or property tag to do the configuration.
  