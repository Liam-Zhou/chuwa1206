# Homework 13

- hw45 - Spring Security

## What is authentication?

- Authentication is the process of verifying the identity of a user or system attempting to access a resource or perform an action.

## What is authorization?

- Authorization is the process of determining whether a user or system has the necessary permissions and privileges to access a resource or perform an action.

## What is the difference between authentication and authorization?

- Authentication establishes who the user is, while authorization determines what the user is allowed to do after their identity has been established.

## What is an HTTP session?

- An HTTP session is a mechanism used to maintain stateful communication between a web server and a client over the HTTP protocol. It allows the server to associate a series of requests from the same client into a single session, enabling the server to recognize the client and maintain information about its interactions across multiple requests.

## What is Cookie?

- a small piece of information generated by the server and saved in the browser

- it may contain user-related, state-related information to achieve functions like sign-in or recommendation.

## What is the difference between Session and Cookie?

- session information is stored in the server while cookies are saved in the browser

## How do we use sessions and cookies to keep user information across the application?

To use sessions and cookies to keep user information across an application, you typically follow these steps:

1. **Enable Sessions:** Ensure that your web application framework or server environment supports sessions. Most web frameworks provide built-in mechanisms for managing sessions.

2. **Start Session:** When a user accesses your application, start a new session if one doesn't already exist. This usually involves creating a unique session identifier and associating it with the user's session data.

3. **Store User Information:** Store relevant user information in the session object. This could include user authentication status, preferences, shopping cart contents, and other data that needs to persist across multiple requests.

4. **Use Cookies:** To associate the session identifier with the user's browser, typically use cookies. Set a cookie containing the session ID in the response headers sent to the client. This cookie will be automatically included in subsequent requests to your application.

5. **Retrieve Session Data:** On each request from the client, retrieve the session identifier from the cookie or request headers. Use this identifier to retrieve the corresponding session data stored on the server.

6. **Update Session Data:** As the user interacts with your application, update the session data as needed. For example, if the user adds items to their shopping cart, update the cart contents stored in the session.

7. **Expire Sessions:** Implement mechanisms to expire sessions after a certain period of inactivity or based on other criteria. This helps manage server resources and enhances security.

## What is JWT?

- JWT stands for JSON Web Token. It is an open standard (RFC 7519) that defines a compact and self-contained way for securely transmitting information between parties as a JSON object. JWTs are commonly used for authentication and authorization in web applications.

## What is the Spring Security Filter?

- In Spring Security, a filter is a component that intercepts incoming HTTP requests and outgoing responses, allowing you to apply security-related logic to them. The Spring Security filter chain is a series of filters that are applied to each incoming HTTP request, allowing Spring Security to enforce security measures such as authentication, authorization, and protection against common web vulnerabilities.

## Describe how JWT works.

- Token creation: header + payload + secret key

- Token issuance: send to the client in the header

- Token transmission: the client stores the token and includes it in the subsequent requests

- Token verification: the server validates the token's integrity and authenticity by verifying the signature using the secret key

- Statelessness: JWTs are stateless, meaning the server does not need to maintain a session state or store tokens. All necessary information is contained within the token itself, making JWTs suitable for distributed systems and microservices architectures.

- Token refresh(Optional): If JWTs have a short expiration time, the client may need to refresh them periodically to maintain user authentication. This can be done by issuing a new JWT with a new expiration time without requiring the user to re-authenticate.

## Do you use any Encoder to encode Passwords?

- BCrypt is a widely used password hashing algorithm that incorporates a salt and a configurable cost factor to increase the computational effort required to hash passwords, making it more resistant to brute-force attacks.

## What is UserDetailService? AuthenticationProvider? AuthenticationManager? AuthenticationFilter?

- In Spring Security, the `UserDetailsService`, `AuthenticationProvider`, `AuthenticationManager`, and `AuthenticationFilter` are core components used for handling authentication and authorization in web applications.

- `UserDetailsService` retrieves user details, `AuthenticationProvider` authenticates users, `AuthenticationManager` manages authentication providers, and `AuthenticationFilter` handles authentication-related HTTP requests in Spring Security. 

- These components work together to authenticate and authorize users in web applications.

## What is the disadvantage of the Session? How to overcome the disadvantage?

- In distributed or microservices systems, nodes cannot share the session information. However, any node may serve any client, every node should access the same session information

- We can put a separate session service to store all session information, this can be done in a gateway or a Redis database

## How to get value from application.properties?

- use `@Value` annotation: `@Value("${my.property.name}`

- use environment abstraction: `environment.getProperty("my.property.name");`

- use `@ConfigurationProperties`: propertyName -> property.name

```java
@Component
public class MyComponent {

    @Value("${my.property.name}")
    private String myPropertyValue;

    public void doSomething() {
        System.out.println("Value from application.properties: " + myPropertyValue);
    }
}

@Configuration
public class MyConfiguration {

    @Autowired
    private Environment environment;

    public void printPropertyValue() {
        String propertyValue = environment.getProperty("my.property.name");
        System.out.println("Value from application.properties: " + propertyValue);
    }
}

@Component
@ConfigurationProperties(prefix = "my")
public class MyProperties {

    private String propertyName;

    // Getter and setter methods

    public void printPropertyValue() {
        System.out.println("Value from application.properties: " + propertyName);
    }
}
```

## What is the role of configure(HttpSecurtiy http) and configure(AuthenticationManagerBuilder auth)?

- In a Spring Security configuration class that extends `WebSecurityConfigurerAdapter`, the `configure(HttpSecurity http)` and `configure(AuthenticationManagerBuilder auth)` methods play crucial roles in configuring security settings for your web application

- `configure(HttpSecurity http)` configures security settings related to HTTP requests and responses, while `configure(AuthenticationManagerBuilder auth)` configures how Spring Security performs authentication. These methods work together to define the overall security configuration of your Spring Boot application.

## What is Spring security authentication and authorization?

- Spring Security provides robust support for both authentication and authorization, allowing developers to secure their Java applications effectively. 
- Authentication verifies the identity of users, while authorization determines what actions or resources they are allowed to access based on their identity and granted authorities. 
- Together, authentication and authorization mechanisms help protect applications from unauthorized access and ensure data security and integrity. Spring Security provides comprehensive support for both authentication and authorization in Java applications.
